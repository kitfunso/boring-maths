---
/**
 * CO2 Injection Calculator Page
 * Calculate CO2 levels from pH and KH readings
 */

import CalculatorLayout from '../../layouts/CalculatorLayout.astro';
import SEOHead from '../../components/common/SEOHead.astro';
import HeroSection from '../../components/calculators/shared/HeroSection.astro';
import ContentSection from '../../components/calculators/shared/ContentSection.astro';
import FAQSection from '../../components/calculators/shared/FAQSection.astro';
import { CO2Calculator } from '../../components/calculators/CO2Calculator';

const title = 'Free Aquarium CO2 Calculator — pH KH CO2 Chart | Boring Math';
const description =
  'Free CO2 calculator for planted aquariums. Calculate CO2 levels from pH and KH readings. Includes drop checker color guide and bubble rate suggestions.';
const keywords =
  'co2 calculator, aquarium co2, planted tank co2, ph kh co2 chart, drop checker, bubble counter, co2 injection';
const canonicalURL = '/calculators/co2-calculator';
const siteUrl = 'https://boring-math.com';

const breadcrumbs = [{ label: 'Calculators', href: '/calculators' }, { label: 'CO2 Calculator' }];

const relatedCalculators = [
  {
    title: 'Fish Stocking',
    description: 'Calculate tank capacity.',
    href: '/calculators/fish-stocking-calculator',
    icon: 'heart' as const,
    color: 'cyan' as const,
  },
  {
    title: 'EI Dosing Calculator',
    description: 'Calculate Estimative Index fertilizer dosing for planted tanks.',
    href: '/calculators/ei-dosing-calculator',
    icon: 'leaf' as const,
    color: 'green' as const,
  },
  {
    title: 'Fish Stocking Calculator',
    description: 'Calculate how many fish your aquarium can safely hold.',
    href: '/calculators/fish-stocking-calculator',
    icon: 'calculator' as const,
    color: 'ocean' as const,
  },
  {
    title: 'Water Change Calculator',
    description: 'Calculate water change volumes and schedules.',
    href: '/calculators/water-change-calculator',
    icon: 'calculator' as const,
    color: 'blue' as const,
  },
];

const faqs = [
  {
    question: 'How does the pH/KH/CO2 relationship work?',
    answer:
      'CO2 dissolves in water to form carbonic acid, which lowers pH. KH (carbonate hardness) buffers against pH changes. The relationship is: CO2 (ppm) = 3 × KH × 10^(7-pH). Lower pH with the same KH means more CO2.',
  },
  {
    question: 'What CO2 level should I target?',
    answer:
      'For planted tanks, 25-35 ppm is optimal for most plants without stressing fish. Start at 20 ppm and increase gradually. High-tech planted tanks with demanding plants may target 30-35 ppm. Never exceed 40 ppm.',
  },
  {
    question: 'Why is my drop checker always blue/green/yellow?',
    answer:
      'Blue = not enough CO2 (under 20 ppm). Green = optimal (20-30 ppm). Yellow = too much CO2 (over 30 ppm). Drop checkers lag about 1-2 hours behind actual CO2 levels, so make adjustments gradually.',
  },
  {
    question: 'How accurate is the pH/KH calculation?',
    answer:
      "The formula assumes only CO2 affects your pH, which isn't always true. Other acids (tannins, organics) can lower pH without adding CO2. For most tanks the formula is accurate within 10-15%. Use a drop checker as verification.",
  },
  {
    question: 'Should I run CO2 24/7 or only during lights-on?',
    answer:
      'Only inject CO2 when lights are on. Plants only use CO2 during photosynthesis. At night, plants respire and produce CO2, so adding more can drop oxygen dangerously low. Use a timer or solenoid to automate this.',
  },
  {
    question: 'My fish are gasping at the surface - is it CO2?',
    answer:
      'Possibly! Fish gasping indicates low oxygen or high CO2. Turn off CO2 immediately, increase surface agitation, and do a water change if needed. CO2 above 40 ppm can stress fish; above 50 ppm is dangerous.',
  },
];

const schemaBreadcrumbs = [
  { name: 'Calculators', url: '/calculators' },
  { name: 'CO2 Calculator', url: canonicalURL },
];
---

<CalculatorLayout
  title={title}
  description={description}
  keywords={keywords}
  canonicalURL={canonicalURL}
  breadcrumbs={breadcrumbs}
  relatedCalculators={relatedCalculators}
>
  <SEOHead
    slot="schema"
    name="Aquarium CO2 Calculator"
    description={description}
    url={`${siteUrl}${canonicalURL}`}
    faqs={faqs}
    breadcrumbs={schemaBreadcrumbs}
  />

  <HeroSection
    title="Aquarium CO2 Calculator"
    description="Calculate CO2 levels in your planted aquarium using pH and KH measurements. Get recommendations for optimal plant growth."
  />

  <section class="mb-16" aria-label="Calculator">
    <CO2Calculator client:visible />
  </section>

  <ContentSection title="Understanding CO2 in Planted Tanks">
    <p>
      Carbon dioxide is essential for plant photosynthesis. In nature, CO2 comes from fish
      respiration, decomposition, and atmospheric exchange. In planted tanks, supplemental CO2
      injection can dramatically improve plant growth and health.
    </p>
    <h3 class="text-lg font-semibold mt-4 mb-2">CO2 Level Guide</h3>
    <ul class="list-disc list-inside space-y-1">
      <li><strong>0-10 ppm:</strong> Low-tech tank levels (no injection)</li>
      <li><strong>15-20 ppm:</strong> Light injection, undemanding plants</li>
      <li><strong>25-30 ppm:</strong> Optimal for most planted tanks</li>
      <li><strong>30-35 ppm:</strong> High-tech tanks, demanding plants</li>
      <li><strong>40+ ppm:</strong> Dangerous to fish - reduce immediately</li>
    </ul>
  </ContentSection>

  <ContentSection title="CO2 Injection Methods">
    <div class="grid md:grid-cols-3 gap-4">
      <div class="bg-cyan-900/20 rounded-lg p-4">
        <h4 class="font-semibold text-cyan-400 mb-2">Pressurized CO2</h4>
        <ul class="text-sm space-y-1 text-[var(--color-subtle)]">
          <li>Most consistent method</li>
          <li>Adjustable bubble rate</li>
          <li>Higher upfront cost</li>
          <li>Best for serious planted tanks</li>
        </ul>
      </div>
      <div class="bg-green-900/20 rounded-lg p-4">
        <h4 class="font-semibold text-green-400 mb-2">DIY Yeast/Citric</h4>
        <ul class="text-sm space-y-1 text-[var(--color-subtle)]">
          <li>Low cost to start</li>
          <li>Inconsistent output</li>
          <li>Requires maintenance</li>
          <li>Good for small tanks</li>
        </ul>
      </div>
      <div class="bg-blue-900/20 rounded-lg p-4">
        <h4 class="font-semibold text-blue-400 mb-2">Liquid Carbon</h4>
        <ul class="text-sm space-y-1 text-[var(--color-subtle)]">
          <li>Easy to dose</li>
          <li>No equipment needed</li>
          <li>Less effective than gas</li>
          <li>Can harm some plants</li>
        </ul>
      </div>
    </div>
  </ContentSection>

  <FAQSection faqs={faqs} />
</CalculatorLayout>
